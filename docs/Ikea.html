
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ikea &#8212; Documentation Abeille 12.12.2019</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/translations.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Documentation Abeille 12.12.2019</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ikea</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ikea">
<h1>Ikea<a class="headerlink" href="#ikea" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="ampoule">
<h2>Ampoule<a class="headerlink" href="#ampoule" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="memo">
<h3>Mémo<a class="headerlink" href="#memo" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un petit mémo avec la télécommande Hue à 20€ pour ceux qui, comme moi, vont devoir ré-inclure toutes leurs ampoules Ikea avec l’upgrade en 3.0F…</p>
<ol class="arabic simple">
<li><p>On appuie sur ON + OFF ( 1 + 0) simultanément pendant 5 secondes à 50 cm de l’ampoule (sous tension bien entendu)</p></li>
<li><p>On ouvre le réseau ZigBee de votre coordinateur (ZiGate par exemple)</p></li>
<li><p>On éteint puis on remet sous tension l’ampoule qui s’appaire au coordinateur</p></li>
<li><p>Pendant que le réseau est ouvert, on retourne la télécommande et à l’aide d’un trombone, on appuie sur le bouton setup pendant 5-10 secondes.</p></li>
<li><p>La télécommande joint à son tour le réseau ZigBee</p></li>
<li><p>Si on le souhaite, on peut associer la télécommande et l’ampoule en maintenant le bouton ON (1) pendant 5 secondes à 50 cm de l’ampoule (toujours sous tension).</p></li>
</ol>
<p>Pour les ampoules recalcitrantes:
Je viens de réussir ! J’ai réalisé un scénario qui commande une prise connectée (Ikea aussi tiens :D ). Voici ma méthode qui semble fonctionner, en tout cas chez moi 2/2 OK :
Mode inclusion
ON du spot
Boucle qui fait 6 fois : OFF / sleep 2s / ON / sleep 0.5s .</p>
</div>
<div class="section" id="nouvelle-inclusion">
<h3>Nouvelle inclusion<a class="headerlink" href="#nouvelle-inclusion" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p>Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter…</p></li>
<li><p>Faire un reset de l’ampoule en partant de la position allumée, puis 6 fois, éteindre-allumer. Il n’est pas facile d’avoir le reset… et après maintes tentatives, vous devriez récupérer l’ampoule dans Jeedom. Autre solution bien plus simple utiliser une télécommande Philips Hue (Hue Dimmer Switch) et forcer le reset par un bouton I + bouton O appuyés suffisamment longtemps. Une fois associée, il est possible d’avoir besoin d’éteindre, attendre 10 secondes et allumer.</p></li>
</ul>
</div>
<div class="section" id="deja-inclue">
<h3>Déjà inclue<a class="headerlink" href="#deja-inclue" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p>Zigate en fonctionnement normale</p></li>
<li><p>Éteindre l’ampoule 15s puis la rallumer</p></li>
</ul>
</div>
<div class="section" id="identify">
<h3>Identify<a class="headerlink" href="#identify" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce bouton est créé au moment de la création de l’objet. Celui ci permet de demander à l’ampoule de se manifester. Elle se met à changer d’intensité ce qui nous permet de la repérer dans une groupe d’ampoules par exemple.</p>
</div>
<div class="section" id="bind">
<h3>Bind<a class="headerlink" href="#bind" title="Lien permanent vers ce titre">¶</a></h3>
<p>Identifiez l’ampoule que vous voulez paramétrer:</p>
<img alt="_images/Capture_d_ecran_2018-02_21_a_23_26_56.png" src="_images/Capture_d_ecran_2018-02_21_a_23_26_56.png" />
<p>Récupérer son adresse IEEE, son adresse courte (ici 6766).</p>
<p>De même, dans l’objet Ruche récupérez l’adresse IEEE (Si l’info n’est pas dispo, un reset de la Zigate depuis l objet ruche doit faire remonter l’information).</p>
<p>Mettre dans le champ:</p>
<ul class="simple">
<li><p>Titre, l’adresse IEEE de l’ampoule que vous voulez paramétrer</p></li>
<li><p>Message, le cluster qui doit être rapporté, et l adresse IEEE de la Zigate.</p></li>
</ul>
<p>image:Capture_d_ecran_2018_02_21_a_23_26_49.png</p>
<p>Attention la capture d’écran n’est pas à jour pour le deuxième champs.</p>
<p>Dans message mettre::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">targetExtendedAddress</span><span class="o">=</span><span class="n">XXXXXXXXXXXXXXXX</span><span class="o">&amp;</span><span class="n">targetEndpoint</span><span class="o">=</span><span class="n">YY</span><span class="o">&amp;</span><span class="n">ClusterId</span><span class="o">=</span><span class="n">ZZZZ</span><span class="o">&amp;</span><span class="n">reportToAddress</span><span class="o">=</span><span class="n">AAAAAAAAAAAAAAAA</span>
</pre></div>
</div>
<p>Exemple avec tous les paramètres::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">targetExtendedAddress</span><span class="o">=</span><span class="mi">90</span><span class="n">fd9ffffe69131d</span><span class="o">&amp;</span><span class="n">targetEndpoint</span><span class="o">=</span><span class="mi">01</span><span class="o">&amp;</span><span class="n">ClusterId</span><span class="o">=</span><span class="mi">0006</span><span class="o">&amp;</span><span class="n">reportToAddress</span><span class="o">=</span><span class="mi">00158</span><span class="n">d00019a1b22</span>
</pre></div>
</div>
<p>Après clic sur Bind, vous devriez voir passer dans le log AbeilleParser (en mode debug) un message comme:</p>
<img alt="_images/Capture_d_ecran_2018_02_21_a_23_27_29.png" src="_images/Capture_d_ecran_2018_02_21_a_23_27_29.png" />
<p>qui confirme la prise en compte par l’ampoule. Status 00 si Ok.</p>
</div>
<div class="section" id="rapport-manuel">
<h3>Rapport Manuel<a class="headerlink" href="#rapport-manuel" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ensuite paramétrer l’envoie de rapport:</p>
<ul class="simple">
<li><p>Titre, l’adresse courte de l’ampoule</p></li>
<li><p>Message, le cluster et le paramètre dans le cluster</p></li>
</ul>
<img alt="_images/Capture_d_ecran_2018_02_21_a_23_29_11.png" src="_images/Capture_d_ecran_2018_02_21_a_23_29_11.png" />
<p>Attention a capture d’écran n’est pas à jour pour le deuxième champs.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">targetEndpoint</span><span class="o">=</span><span class="mi">01</span><span class="o">&amp;</span><span class="n">ClusterId</span><span class="o">=</span><span class="mi">0006</span><span class="o">&amp;</span><span class="n">AttributeType</span><span class="o">=</span><span class="mi">10</span><span class="o">&amp;</span><span class="n">AttributeId</span><span class="o">=</span><span class="mi">0000</span> <span class="n">pour</span> <span class="n">retour</span> <span class="n">d</span><span class="s1">&#39;état ampoule Ikea</span>
<span class="n">targetEndpoint</span><span class="o">=</span><span class="mi">01</span><span class="o">&amp;</span><span class="n">ClusterId</span><span class="o">=</span><span class="mi">0008</span><span class="o">&amp;</span><span class="n">AttributeType</span><span class="o">=</span><span class="mi">20</span><span class="o">&amp;</span><span class="n">AttributeId</span><span class="o">=</span><span class="mi">0000</span> <span class="n">pour</span> <span class="n">retour</span> <span class="n">de</span> <span class="n">niveau</span> <span class="n">ampoule</span> <span class="n">Ikea</span>
</pre></div>
</div>
<p>De même vous devriez voir passer dans le log AbeilleParse (en mode debug) un message comme:</p>
<p>qui confirme la prise en compte par l’ampoule. Status 00 si Ok.</p>
<p>Après sur un changement d’état l’ampoule doit remonter l’info vers Abeille, avec des messages comme:</p>
<img alt="_images/Capture_d_ecran_2018_02_21_a_23_31_11.png" src="_images/Capture_d_ecran_2018_02_21_a_23_31_11.png" />
<p>pour un retour Off de l’ampoule.</p>
</div>
<div class="section" id="homebridge">
<h3>HomeBridge<a class="headerlink" href="#homebridge" title="Lien permanent vers ce titre">¶</a></h3>
<img alt="_images/Capture_d_ecran_2019_04_14_a_00_44_29.png" src="_images/Capture_d_ecran_2019_04_14_a_00_44_29.png" />
</div>
</div>
<div class="section" id="telecommande-ronde-5-boutons">
<span id="telecommanderonde5boutons"></span><h2>Télécommande Ronde 5 boutons<a class="headerlink" href="#telecommande-ronde-5-boutons" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="telecommande-reelle">
<h3>Télécommande réelle<a class="headerlink" href="#telecommande-reelle" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="video">
<h4>Video<a class="headerlink" href="#video" title="Lien permanent vers ce titre">¶</a></h4>
<p><a class="reference external" href="https://youtu.be/eDTDXg1dBzY">Inclusion Telecommande 5 Boutons Ronde Ikea et ampoule Ikea.</a></p>
</div>
<div class="section" id="introduction">
<h4>Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les télécommandes envoient des commandes directement aux équipements mais pas à la zigate. De ce fait Abeille/Jeedom ne recoive pas d’info sur l’utilisation des télécommandes.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>C’est aux équipements qui reçoivent les demandes de la télécommande réelle de renvoyer leur état vers Jeedom.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A partir du firmware 3.0f on peut récupérer des appuis sur les boutons de la télécommande avec une configuration spécifique de groupe au niveau de la ZiGate, ce qui permet de déclancher des scénarii par exemple.</p>
</div>
</div>
<div class="section" id="id1">
<h4>Nouvelle inclusion<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><p>Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter…</p></li>
<li><p>Prendre la telecommande Ikea et faire 4 appuis sur le bouton OO au dos de la télécommande. La télécommande doit se mettre à flasher rouge en face avant. La télécommande doit apparaitre dans Jeedom.</p></li>
</ul>
<p>Si cela ne fonctionne pas, il est possible d’interroger le nom pour créer l’objet (Originale solution).</p>
<div class="section" id="originale-solution">
<h5>Originale solution:<a class="headerlink" href="#originale-solution" title="Lien permanent vers ce titre">¶</a></h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cette solution est la toute premiere version dans Abeille et est dans la documentation pour garder une trace mais ce n’est pas la méthode recommandée.</p>
</div>
<p>Il faut connaitre l’adresse de la télécommande.</p>
<p>Puis dans la ruche demander son nom. Par exemple pour la télécommande à l’adresse ec15</p>
<img alt="_images/Capture_d_ecran_2018_02_28_a_13_59_31.png" src="_images/Capture_d_ecran_2018_02_28_a_13_59_31.png" />
<p>et immédiatement après appuyez sur un des boutons de la télécommande pour la réveiller (pas sur le bouton arrière).</p>
<p>Et après un rafraichissement de l’écran vous devez avoir un objet</p>
<img alt="_images/Capture_d_ecran_2018_02_28_a_14_00_58.png" src="_images/Capture_d_ecran_2018_02_28_a_14_00_58.png" />
<p>Il faut ensuite éditer les commandes en remplaçant l’adresse de la télécommande par le groupe que l’on veut contrôler</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il n’est plus nécessaire de faire la modification dans les commandes mais mettre l’Id du groupe dans les parametres.</p>
</div>
<p>La configuration</p>
<img alt="_images/Capture_d_ecran_2018_02_28_a_14_03_26.png" src="_images/Capture_d_ecran_2018_02_28_a_14_03_26.png" />
<p>va devenir</p>
<img alt="_images/Capture_d_ecran_2018_02_28_a_14_03_47.png" src="_images/Capture_d_ecran_2018_02_28_a_14_03_47.png" />
<p>pour le groupe 5FBD.</p>
</div>
</div>
<div class="section" id="leave">
<h4>Leave<a class="headerlink" href="#leave" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><p>4x sur bouton arrière</p></li>
</ul>
</div>
<div class="section" id="groupes">
<h4>Groupes<a class="headerlink" href="#groupes" title="Lien permanent vers ce titre">¶</a></h4>
<p>Récupérer le groupe utilisé par une télécommande</p>
<p>Avoir une télécommande et une ampoule Ikea sur le même réseau Zigbee. Attention l’ampoule va perdre sa configuration. Approcher à 2 cm la télécommande de l’ampoule et appuyez pendant 10s sur le bouton à l’arrière de la télécommande avec le symbole “OO”. L’ampoule doit clignoter,  relâcher le bouton. Voilà la télécommande à affecté son groupe à l’ampoule Il suffit maintenant de faire un getGroupMemberShip depuis la ruche sur l’ampoule pour récupérer le groupe. Merci a &#64;rkhadro pour sa trouvaille.</p>
<p>Il existe un bouton « link » à côté de la pile bouton de la télécommande. 4 clicks pour appairer la télécommande à la Zigate. Un appuie long près de l’ampoule pour le touchlink.</p>
</div>
<div class="section" id="programmer">
<h4>Programmer<a class="headerlink" href="#programmer" title="Lien permanent vers ce titre">¶</a></h4>
<p>Il est aussi possible de définir le Groupes d’une télécommande depuis Abeille (Ikea Telecommande ronde 5 boutons et telecommande Ikea 2 bouton On/Off).</p>
<p>Pour ce faire, il faut utiliser la commande « Set Group Remote » et réveiller la télécommande. En gros la tetecommande étant sur pile, elle dort pour ne pas consommer de courant et ne peut pas entendre les demandes d’Abeille/ZiGate.
Il faut donc la reveiller, pour cela un appui sur un de ses 5 boutons la reveille pendant quelques secondes. En fait, elle envoie l info d un bouton appuyé puis ecoute pendant quelques secondes et c est la qu on peut lui demander de prendre une configuration de groupe.
Donc definir le group dans le champ Id, appui sur un bouton de la telecommande et « Set Group Remote ».</p>
<img alt="_images/Capture_d_ecran_2019_07_02_a_15_12_26.png" src="_images/Capture_d_ecran_2019_07_02_a_15_12_26.png" />
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>« Set Group Remote » ne devrait fonctionner que pour les telecommande Ikea.</p>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Comme il faut etre synchrone, il peut etre necessaire de ci prendre à plusieurs fois pour que cela fonctionne.</p>
</div>
</div>
</div>
<div class="section" id="telecommande-virtuelle">
<h3>Télécommande Virtuelle<a class="headerlink" href="#telecommande-virtuelle" title="Lien permanent vers ce titre">¶</a></h3>
<p>La télécommande virtuelle est un objet Jeedom qui envoies les commandes Zigbee comme si c’était une vrai télécommande IKEA.</p>
<p>Vidéo: <a class="reference external" href="https://youtu.be/_ScmWoSXVr8">Configuration Telecommande Ikea Réelle et simulée dans Jeedom.</a></p>
<p>Pour créer un télécommande, utilisez les commandes cachées dans la ruche:</p>
<ul class="simple">
<li><p>Ouvrir la page commande de la ruche et trouver la commande « TRADFRI remote control ».</p></li>
</ul>
<img alt="_images/Capture_d_ecran_2018_03_02_a_10_34_40.png" src="_images/Capture_d_ecran_2018_03_02_a_10_34_40.png" />
<p>Remplacez « /TRADFRI remote control/ » l’adresse du groupe que vous voulez contrôler. Par exemple AAAA.</p>
<img alt="_images/Capture_d_ecran_2018_03_02_a_10_35_08.png" src="_images/Capture_d_ecran_2018_03_02_a_10_35_08.png" />
<p>Sauvegardez et faites « Tester ».</p>
<p>Vous avez maintenant une télécommande pour contrôler le groupe AAAA.</p>
<img alt="_images/Capture_d_ecran_2018_03_02_a_10_35_28.png" src="_images/Capture_d_ecran_2018_03_02_a_10_35_28.png" />
<p>Ouvrez l’équipement « Abeille-AAAA » et ouvrez le tab « Parameter ».</p>
<img alt="_images/Capture_d_ecran_2019_07_05_a_11_42_05.png" src="_images/Capture_d_ecran_2019_07_05_a_11_42_05.png" />
<p>et définissez le groupe à controller dans le champ Groupe.</p>
<div class="section" id="recuperation">
<span id="telecommande-ikea-recuperation"></span><h4>Récupération<a class="headerlink" href="#recuperation" title="Lien permanent vers ce titre">¶</a></h4>
<p>Récupération des appuis Télécommande Ikea dans Abeille</p>
<p>Après avoir récupéré le groupe utilisé par la télécommande, vous pouvez ajouter la Zigate à ce groupe ainsi Abeille recevra les demandes de la télécommande. Attention la Zigate est limitée à 5 groupes soit disons 5 télécommandes.</p>
<p>Pour ce faire dans Abeille, ajouter les groupes à l’objet « Ruche » qui représente la Zigate.</p>
<p>Vous pouvez aussi forcer le groupe utilisé par la télécommande en sélectionnant la télécommande ikea, en mettant le groupe dans le champ Id puis clic sur le bouton « Set Group Remote » et dans la seconde qui suis en appuyant sur un bouton de la télécommande pour la réveiller. Il peut être nécessaire de le faire plusieurs fois du fait du timing un peu spécifique.</p>
<p>C’est aussi valide pour le bouton On/Off Ikea.</p>
<p><a class="reference external" href="https://github.com/fairecasoimeme/Zigate/issues/6">https://github.com/fairecasoimeme/Zigate/issues/6</a></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 14%" />
<col style="width: 12%" />
<col style="width: 17%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Button</p></th>
<th class="head"><p>Pres-stype</p></th>
<th class="head"><p>Response</p></th>
<th class="head"><p>command</p></th>
<th class="head"><p>attr</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>down</p></td>
<td><p>click</p></td>
<td><p>0x8085</p></td>
<td><p>0x02</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>down</p></td>
<td><p>hold</p></td>
<td><p>0x8085</p></td>
<td><p>0x01</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>down</p></td>
<td><p>release</p></td>
<td><p>0x8085</p></td>
<td><p>0x03</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>up</p></td>
<td><p>click</p></td>
<td><p>0x8085</p></td>
<td><p>0x06</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>up</p></td>
<td><p>hold</p></td>
<td><p>0x8085</p></td>
<td><p>0x05</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>up</p></td>
<td><p>release</p></td>
<td><p>0x8085</p></td>
<td><p>0x07</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>middle</p></td>
<td><p>click</p></td>
<td><p>0x8095</p></td>
<td><p>0x02</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>left</p></td>
<td><p>click</p></td>
<td><p>0x80A7</p></td>
<td><p>0x07</p></td>
<td><p>direction: 1</p></td>
</tr>
<tr class="row-even"><td><p>left</p></td>
<td><p>hold</p></td>
<td><p>0x80A7</p></td>
<td><p>0x08</p></td>
<td><p>direction: 1    =&gt; can t get that one</p></td>
</tr>
<tr class="row-odd"><td><p>right</p></td>
<td><p>click</p></td>
<td><p>0x80A7</p></td>
<td><p>0x07</p></td>
<td><p>direction: 0</p></td>
</tr>
<tr class="row-even"><td><p>right</p></td>
<td><p>hold</p></td>
<td><p>0x80A7</p></td>
<td><p>0x08</p></td>
<td><p>direction: 0    =&gt; can t get that one</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>left/right <a href="#id2"><span class="problematic" id="id3">|</span></a>release</p></td>
<td><p>0x80A7</p></td>
<td><p>0x09</p></td>
<td><p>None            =&gt; can t get that one</p></td>
</tr>
</tbody>
</table>
<p>down = brightness down, up = brightness up,</p>
<p>middle = Power button,</p>
<p>left and right = when brightness up is up left is left and right is right.</p>
<p>Holding down power button for ~10 sec will result multiple commands sent, but it wont send any hold command only release.</p>
<p>Remote won’t tell which button was released left or right, but it will be same button that was last hold.</p>
<p>Remote is unable to send other button commands at least when left or right is hold down.</p>
<p>Reponse 0x8085 correspond à l’info Up-Down dans le widget.</p>
<p>Reponse 0x8095 correspond à l’info Click-Middle dans le widget.</p>
<p>Reponse 0x80A7 correspond à l’info Left-Right-Cmd et Left-Right-Direction dans le widget.</p>
<p>A partir de la vous pouvez déclencher des scénarii dans Jeedom.</p>
<p>Attention lors de l’utilisation de la télécommande, dans Abeille elle sera mis a jour et vos scénarii déclenchés mais si vous avez des équipements Zigbee sur ce groupe ils seront aussi activés.
Par exemple vous pouvez avoir une Ampoule Ikea sur le groupe de la télécommande qui réagira aux demandes de la télécommande directement en Zigbee (même si Jeedom est HS) et avoir un scénario qui se déclenche en même temps pour ouvrir les volets en zwave ou autre.</p>
<p>Le capteur IR Exterieur Ikea envoie Click-Middle lors de la detection d’une présence.</p>
</div>
</div>
<div class="section" id="gradateur">
<h3>Gradateur<a class="headerlink" href="#gradateur" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="un-clic-sur-oo">
<h4>Un clic sur OO<a class="headerlink" href="#un-clic-sur-oo" title="Lien permanent vers ce titre">¶</a></h4>
<p>Un clic sur OO envoie un Beacon Request. Même si la zigate est en inclusion, il n’y a pas d’association (Probablement le cas si déjà associé à un autre réseau).</p>
</div>
<div class="section" id="clics-sur-oo">
<h4>4 clics sur OO<a class="headerlink" href="#clics-sur-oo" title="Lien permanent vers ce titre">¶</a></h4>
<p>Message Leave, puis Beacon Requets puis association si réseau en mode inclusion. Une fois associé, un getName avec un réveil du gradateur permet de récupérer le nom.</p>
<p>Voir la télécommande 5 boutons pour avoir plus de détails sur le contrôle de groupe,…</p>
</div>
</div>
<div class="section" id="prise">
<h3>Prise<a class="headerlink" href="#prise" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="id4">
<h4>Nouvelle inclusion<a class="headerlink" href="#id4" title="Lien permanent vers ce titre">¶</a></h4>
<ul class="simple">
<li><p>Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter…</p></li>
<li><p>Faire un reset de la prise en insérant un petit trombone dans le trou pres de la led de la prise. Attendre 5s, la prise doit apparaitre dans Jeedom.</p></li>
</ul>
</div>
</div>
<div class="section" id="telecommande">
<h3>Télécommande<a class="headerlink" href="#telecommande" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="simuler-la-telecommande">
<span id="telecommanderonde5boutonssimulation"></span><h4>Simuler la télécommande<a class="headerlink" href="#simuler-la-telecommande" title="Lien permanent vers ce titre">¶</a></h4>
<p>Pour créer une Telecommande simulée, clic sur l icone Télécommande:</p>
<img alt="_images/Capture_d_ecran_2019_07_06_a_09_54_26.png" src="_images/Capture_d_ecran_2019_07_06_a_09_54_26.png" />
<p>apres rafraichissement de l’écran vous aurez une telecommande:</p>
<img alt="_images/Capture_d_ecran_2019_07_06_a_09_55_32.png" src="_images/Capture_d_ecran_2019_07_06_a_09_55_32.png" />
<p>Il suffit maintenant de mettre l’Id du groupe dans ses parametres.</p>
</div>
<div class="section" id="recuperer-un-groupe">
<h4>Récupérer un groupe<a class="headerlink" href="#recuperer-un-groupe" title="Lien permanent vers ce titre">¶</a></h4>
<p>Cette opération est un peu délicate mais doit permettre de récupérer l’adresse de groupe utilisée par la télécommande suite aux opérations ci dessus. Dans le futur ce devrait être automatique.</p>
<p>Aller dans la page de configuration du plugin et clic sur « Network » pour faire apparaitre les paramètres dans l’Ampoule:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_30_24.png" src="_images/Capture_d_ecran_2018_10_30_a_11_30_24.png" />
<p>Sur l’objet Ampoule vous devez vous le champ « Groups » apparaitre sans information:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_36_43.png" src="_images/Capture_d_ecran_2018_10_30_a_11_36_43.png" />
<p>Recuperons l’adresse de l ampoule, en ouvrant la page de configuration de l ampoule:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_42_09.png" src="_images/Capture_d_ecran_2018_10_30_a_11_42_09.png" />
<p>Le champ « Topic Abeille » contient l’adresse, ici « 9252 ».</p>
<p>Interrogeons maintenant l’ampoule, avec un getGroupMemberShip depuis l objet Ruche:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_45_23.png" src="_images/Capture_d_ecran_2018_10_30_a_11_45_23.png" />
<p>Indiquez l’adresse de l ampoule.</p>
<p>Maintenant le champ « Groups » de l’ampoule doit contenir l’adresse de groupe:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_47_24.png" src="_images/Capture_d_ecran_2018_10_30_a_11_47_24.png" />
<p>ici le groupe utilisé par la télécommande est « f65d ».</p>
<p>Maintenant nous pouvons mettre à jour la télécommande dans Jeedom. Ouvrez les commandes de la télécommande:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_50_17.png" src="_images/Capture_d_ecran_2018_10_30_a_11_50_17.png" />
<p>Dans le champ « Topic » des commandes vous pouvez voir le texte =addrGroup= qu’il faut remplacer par la valeur du groupe, ici « f65d » et sauvegarder.</p>
<p>Cela donne:</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_54_51.png" src="_images/Capture_d_ecran_2018_10_30_a_11_54_51.png" />
<p>Maintenant vous pouvez commander votre ampoule depuis la Télécommande physique et depuis la Télécommande Jeedom.</p>
<img alt="_images/Capture_d_ecran_2018_10_30_a_11_58_42.png" src="_images/Capture_d_ecran_2018_10_30_a_11_58_42.png" />
<p>PS: Les scénarios ne sont pas implémentés pour l’instant (30/10/2018):</p>
<ul class="simple">
<li><p>Sc1, Sc2, SC3 sur la télécommande dans Jeedom,</p></li>
<li><p>et les boutons « Fleche Gauche », « Fleche Droite » de la télécommande physique.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="transfo">
<h2>Transfo<a class="headerlink" href="#transfo" title="Lien permanent vers ce titre">¶</a></h2>
</div>
<div class="section" id="inclusion">
<h2>Inclusion<a class="headerlink" href="#inclusion" title="Lien permanent vers ce titre">¶</a></h2>
<p>appui bouton reset 3s avec zigate en mode inclusion.</p>
</div>
<div class="section" id="store">
<h2>Store<a class="headerlink" href="#store" title="Lien permanent vers ce titre">¶</a></h2>
<p>Inclusion en appuyant 8s sur les deux boutons en face avant du store et zigate en mode inclusion.</p>
<p>Un device doit se créer dans Abeille et vous pouvez commander le store.</p>
<p>Si vous voulez controler le store avec la telecommande store, lui ajouter un groupe. Par defaut la télécommande utilise le groupe 0000.</p>
</div>
<div class="section" id="telecommande-store">
<h2>Telecommande Store<a class="headerlink" href="#telecommande-store" title="Lien permanent vers ce titre">¶</a></h2>
<p>Inclusion en 4x fois appui sur bouton arriere avec zigate en mode inclusion.</p>
<p>Par defaut la telecommande adresse les messages au groupe 0000. Positionner l’adresse du groupe que vous souhaitez avec la command « Set Group Remote » afin que la telecommande physique utilise ce groupe. Et renseigner dans les parametres de la telecommande dans jeedom la valeur du groupe pour que la telecommande virtuelle utilise le meme groupe.</p>
<p>Attention cette telecommande n’est pas identique à la télécommande I/O, elles n’envoient pas les même commandes. Celle ci envoie des commandes pour des stores (Up/Down) alors que celle I/O envoie des commandes de type On/Off. Donc une I/O ne peut pas commander un store et une telecommande store ne peut pas commander une prise ou une ampoule.</p>
<p>L’objet Telecommande créé dans Abeille permet d’avoir les trois commandes Up/Stop/Down. Par défaut, la télécommande dans Abeille enverra les commandes à tous les stores en même temps. La fonction de groupe ne fonctionne pas. Renseigné tout de même le parametre Groupe dans le tab Param mettre une valeur commme 0000. Peut être qu’un jour cette valeur sera utilisable.</p>
</div>
<div class="section" id="bouton-des-store-ikea-open-close-e1766-tradfri-et-son-store-associe">
<h2>Bouton des store IKEA Open/close E1766 TRADFRI et son store associé<a class="headerlink" href="#bouton-des-store-ikea-open-close-e1766-tradfri-et-son-store-associe" title="Lien permanent vers ce titre">¶</a></h2>
<p>Merci a seraf pour son petit texte:</p>
<p>Globalement, ce que j’ai fait:</p>
<p>J’ai inclus le repeteur (j’en vois toujours pas l’utilité …) en restant appuyé 5 secondes sur le bouton reset
J’ai inclus la télécommande en appuyant 4 fois sur le bouton d’association
J’ai inclus mes stores en appuyant 5 secondes sur 2 boutons
Une fois cela fait, j’ai assigné un groupe aux appareils. C’est expliqué dans la documentation, mais c’est vrai que c’est pas « user friendly ».
Il faut selectionner les stores que l’on va utiliser avec la télécommande via la checkbox au dessus des équipements.
Dans la section en dessous des équipements (celle ci s’appelle groupes), il faut mettre un numero de groupe à 4 chiffres. Par exemple on peut mettre 0000, mais aussi 0001 etc.
Donc j’ai « ajouté » le groupe 0000 à mes 2 stores. (Add Group).</p>
<p>Pour la télécommande, même procédure, je lui ai mis 0000 par contre il faut cliquer sur « Set Group Remote ». Une fois cela fait, la télécommande peut controler les stores ;-)</p>
</div>
<div class="section" id="routeur-repeteur">
<h2>Routeur (Repeteur)<a class="headerlink" href="#routeur-repeteur" title="Lien permanent vers ce titre">¶</a></h2>
<p>Mettre la zigate en mode inclusion et un clic sur le bouton reset du routeur et il doit rejoindre le réseau.</p>
<p>Note: ce n’est pas un répéteur comme on peut le lire partout mais c’est un routeur.</p>
</div>
<div class="section" id="ir-detecteur-de-presence-e1525-e1575">
<h2>IR - Detecteur de presence (E1525/E1575)<a class="headerlink" href="#ir-detecteur-de-presence-e1525-e1575" title="Lien permanent vers ce titre">¶</a></h2>
<blockquote>
<div><p>En fait le E1575 se comporte comme le E1525 (avec de subtilités).</p>
</div></blockquote>
<p>Il faut voir qu’une fois qu’il a envoyé une demande d’allumage il ne renverra pas de nouvelle demande avant 95s. C’est important pour la suite. Par defaut il utilise le groupe 0000.
Pour définir le groupe avec lequel il va discuté, il faut faire un set Group Remote avec le bon timing.
Pas évident car aucune indication n’est visible (Perso je peux le voir avec le sniffer). La manip a faire est la suivante.</p>
<p>mettre le detecteur en mode jour et nuit
Cacher le detecteur pendant au moins 95s
selectionner le detecteur dans la conf abeille
saisir le groupe, par exemple AAAA
faire Set Group Remote
et immediatement de-caché le capteur pour qu il vous detecte et se reveille pour envoyer sa commande
Voila le capteur doit etre programmé, sinon refaire la manip.
Ajouter le groupe a une ampoule ici AAAA
attendre 95s
declencher le capteur en bougeant devant lui et l ampoule doit s allumer.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table des matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Ikea</a><ul>
<li><a class="reference internal" href="#ampoule">Ampoule</a><ul>
<li><a class="reference internal" href="#memo">Mémo</a></li>
<li><a class="reference internal" href="#nouvelle-inclusion">Nouvelle inclusion</a></li>
<li><a class="reference internal" href="#deja-inclue">Déjà inclue</a></li>
<li><a class="reference internal" href="#identify">Identify</a></li>
<li><a class="reference internal" href="#bind">Bind</a></li>
<li><a class="reference internal" href="#rapport-manuel">Rapport Manuel</a></li>
<li><a class="reference internal" href="#homebridge">HomeBridge</a></li>
</ul>
</li>
<li><a class="reference internal" href="#telecommande-ronde-5-boutons">Télécommande Ronde 5 boutons</a><ul>
<li><a class="reference internal" href="#telecommande-reelle">Télécommande réelle</a><ul>
<li><a class="reference internal" href="#video">Video</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#id1">Nouvelle inclusion</a><ul>
<li><a class="reference internal" href="#originale-solution">Originale solution:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#leave">Leave</a></li>
<li><a class="reference internal" href="#groupes">Groupes</a></li>
<li><a class="reference internal" href="#programmer">Programmer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#telecommande-virtuelle">Télécommande Virtuelle</a><ul>
<li><a class="reference internal" href="#recuperation">Récupération</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gradateur">Gradateur</a><ul>
<li><a class="reference internal" href="#un-clic-sur-oo">Un clic sur OO</a></li>
<li><a class="reference internal" href="#clics-sur-oo">4 clics sur OO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prise">Prise</a><ul>
<li><a class="reference internal" href="#id4">Nouvelle inclusion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#telecommande">Télécommande</a><ul>
<li><a class="reference internal" href="#simuler-la-telecommande">Simuler la télécommande</a></li>
<li><a class="reference internal" href="#recuperer-un-groupe">Récupérer un groupe</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#transfo">Transfo</a></li>
<li><a class="reference internal" href="#inclusion">Inclusion</a></li>
<li><a class="reference internal" href="#store">Store</a></li>
<li><a class="reference internal" href="#telecommande-store">Telecommande Store</a></li>
<li><a class="reference internal" href="#bouton-des-store-ikea-open-close-e1766-tradfri-et-son-store-associe">Bouton des store IKEA Open/close E1766 TRADFRI et son store associé</a></li>
<li><a class="reference internal" href="#routeur-repeteur">Routeur (Repeteur)</a></li>
<li><a class="reference internal" href="#ir-detecteur-de-presence-e1525-e1575">IR - Detecteur de presence (E1525/E1575)</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Ikea.rst.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Index général"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Documentation Abeille 12.12.2019</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ikea</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, KiwiHC16.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>